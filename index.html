<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
   
  </head>
  <body>
<style>
  * { margin:0; padding:0; } /* to remove the top and left whitespace */

html, body { width:100%; height:100%; } /* just to be sure these are full screen*/

canvas { display:block; } /* To remove the scrollbars */


/* to show the canvas bounds */
canvas {
    background: #eee;
}

div {
    position: absolute;
    top: 20px;
    left: 20px;
    width: 200px;
    height: 200px;
    overflow:auto;
    resize:both;
}
  </style>
  <div style="background-color:cyan" id="mydiv"><canvas style="border:1px solid grey;" id="mycanvas"></canvas></div>
      
    <!-- All of the Node.js APIs are available in this renderer process. -->
    <p id='word1'>start!</p>,<p id='mean1'>여기는 뜻이 나오는 자리</p>
<script>
  var lastImageBlob

  (function() {
    var mydiv = document.getElementById('mydiv');
    var canvas = document.getElementById('mycanvas'),
            context = canvas.getContext('2d');

    // resize the canvas to fill browser window dynamically
    mydiv.addEventListener('resize', resizeCanvas, false);

    function resizeCanvas() {
            
            canvas.width = mydiv.innerWidth;
            canvas.height = mydiv.innerHeight;

            /**
             * Your drawings need to be inside this function otherwise they will be reset when 
             * you resize the browser window and the canvas goes will be cleared.
             */
            drawStuff(); 
    }
    resizeCanvas();

    function drawStuff() {
            // do your drawing stuff here
            onResizeCanvas();
    }
})();
  </script>
    <script>
      // You can also require other files to run in this process
      require('./renderer.js');

      require('electron').ipcRenderer.on('word1Change', function(event, inText) {
        document.getElementById('word1').innerHTML = inText;
      });
      require('electron').ipcRenderer.on('mean1Change', function(event, inText) {
        document.getElementById('mean1').innerHTML = inText;        
      });

      function onResizeCanvas()
      {
        if (lastImageBlob)
        {
          var canvas = document.getElementById("mycanvas");
        var ctx = canvas.getContext('2d');
        
        // Create an image to render the blob on the canvas
        var img = new Image();

        // Once the image loads, render the img on the canvas
        img.onload = function(){
            // Update dimensions of the canvas with the dimensions of the image
            //canvas.width = this.width;
            //canvas.height = this.height;

            // Draw the image
            ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);
        };

        // Crossbrowser support for URL
        var URLObj = window.URL || window.webkitURL;

        // Creates a DOMString containing a URL representing the object given in the parameter
        // namely the original Blob
        img.src = URLObj.createObjectURL(lastImageBlob);
        }
      }

/**
 * This handler retrieves the images from the clipboard as a blob and returns it in a callback.
 * 
 * @param pasteEvent 
 * @param callback 
 */
 function retrieveImageFromClipboardAsBlob(pasteEvent, callback){
	if(pasteEvent.clipboardData == false){
        if(typeof(callback) == "function"){
            callback(undefined);
        }
    };

    var items = pasteEvent.clipboardData.items;

    if(items == undefined){
        if(typeof(callback) == "function"){
            callback(undefined);
        }
    };

    for (var i = 0; i < items.length; i++) {
        // Skip content if not image
        if (items[i].type.indexOf("image") == -1) continue;
        // Retrieve image on clipboard as blob
        var blob = items[i].getAsFile();

        if(typeof(callback) == "function"){
            callback(blob);
        }
    }
}      

window.addEventListener("paste", function(e){

// Handle the event
retrieveImageFromClipboardAsBlob(e, function(imageBlob){
    // If there's an image, display it in the canvas
    if(imageBlob){
      lastImageBlob = imageBlob;
        var canvas = document.getElementById("mycanvas");
        var ctx = canvas.getContext('2d');
        
        // Create an image to render the blob on the canvas
        var img = new Image();

        // Once the image loads, render the img on the canvas
        img.onload = function(){
            // Update dimensions of the canvas with the dimensions of the image
            canvas.width = this.width;
            canvas.height = this.height;

            // Draw the image
            ctx.drawImage(img, 0, 0);
        };

        // Crossbrowser support for URL
        var URLObj = window.URL || window.webkitURL;

        // Creates a DOMString containing a URL representing the object given in the parameter
        // namely the original Blob
        img.src = URLObj.createObjectURL(imageBlob);
    }
});
}, false);
    </script>
  </body>
</html>
